CREATE TRIGGER CREDITOS  AFTER INSERT ON historialacademico FOR EACH ROW BEGIN DECLARE sumcreditosobl INT; DECLARE sumcreditosopt INT;  SET sumcreditosobl = (select  SUM(m.Creditos)  from historialacademico h, materia m  where h.IDmateria=m.IDmateria && h.calificacion >5 &&m.Tipo="OBL" && h.NumCuenta=NEW.NumCuenta); SET sumcreditosopt=(select  SUM(m.Creditos)  from historialacademico h, materia m  where h.IDmateria=m.IDmateria && h.calificacion >5 &&m.Tipo="OPT" && h.NumCuenta=NEW.NumCuenta); iF (sumcreditosobl IS NULL ) THEN set sumcreditosobl = 0; END IF; iF (sumcreditosopt IS NULL ) THEN set sumcreditosopt = 0; END IF; UPDATE calificaciones  SET Cobligatorios = sumcreditosobl, Coptativos = sumcreditosopt, sumcreditosobl+sumcreditosopt WHERE NumCuenta=NEW.NumCuenta; END;